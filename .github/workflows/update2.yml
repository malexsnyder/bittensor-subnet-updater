      - name: Upload latest subnet data to OpenAI Vector Store
        env:
          OPENAI_API_KEY: ${{ secrets.BITTENSOR_SUBNETS }}
        run: |
          python - <<'EOF'
          import openai, os

          openai.api_key = os.environ["OPENAI_API_KEY"]

          vector_store_id = "vs_68f441099ff88191a84e2e4dadfdc104"
          profiles_path = "data/all_subnet_profiles.txt"

          if not os.path.exists(profiles_path):
              raise FileNotFoundError(f"{profiles_path} not found.")

          print("Uploading subnet data to vector store...")

          with open(profiles_path, "rb") as f:
              try:
                  # For new SDK versions
                  openai.beta.vector_stores.files.create(
                      vector_store_id=vector_store_id,
                      file=f
                  )
              except AttributeError:
                  # For older SDKs (fallback)
                  print("⚠️ Using legacy upload method")
                  openai.File.create(file=f, purpose="assistants")

          print("✅ Uploaded subnet data successfully (or fallback used).")
          EOF
